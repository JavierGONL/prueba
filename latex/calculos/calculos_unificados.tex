% !TeX program = lualatex
\documentclass{article}

\usepackage[spanish]{babel}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{geometry}
\geometry{a4paper, margin=2.5cm}
\usepackage{amsmath}

\setmainfont{Latin Modern Roman}
\setmathfont{STIXTwoMath-Regular.otf}[
  Path = C:/Users/lunit/AppData/Local/Programs/MiKTeX/fonts/opentype/public/stix2-otf/,
  BoldFont = STIXTwoMath-Regular.otf
]

\usepackage{newunicodechar}

% ==== Definición de símbolos geométricos especiales (flechas de dirección) ====
\newcommand{\angulese}{\ensuremath{\symbol{"29A8}}} % ⦨
\newunicodechar{⦨}{\angulese}

\newcommand{\anglees}{\ensuremath{\symbol{"29A9}}} % ⦩
\newunicodechar{⦩}{\anglees}

\newcommand{\anglenesw}{\ensuremath{\symbol{"29AA}}} % ⦪
\newunicodechar{⦪}{\anglenesw}

\newcommand{\anglensw}{\ensuremath{\symbol{"29AB}}} % ⦫
\newunicodechar{⦫}{\anglensw}

\newcommand{\measuredangleleft}{\ensuremath{\symbol{"29AC}}} % ⦬
\newunicodechar{⦬}{\measuredangleleft}

\newcommand{\measuredangleright}{\ensuremath{\symbol{"29AD}}} % ⦭
\newunicodechar{⦭}{\measuredangleright}

\newcommand{\sphericalangleup}{\ensuremath{\symbol{"29AE}}} % ⦮
\newunicodechar{⦮}{\sphericalangleup}

\newcommand{\sphericalangledown}{\ensuremath{\symbol{"29AF}}} % ⦯
\newunicodechar{⦯}{\sphericalangledown}

\title{Cálculos del Mecanismo de Retorno Rápido}
\author{}
\date{}

\begin{document}

\maketitle
\tableofcontents
\newpage

% ============================================================
% SECCIÓN 1: ANÁLISIS DE ÁNGULOS Y VELOCIDADES
% ============================================================
 
\section{calculos organizados}
\subsection{Modelo cinemático}

\subsubsection{Relación entre $\theta$ y $\phi$}

Inicialmente para el analisis cinemático es necesario encontrar expresiones que permitan describrir las distancias
e inclinaciones de todas las partes del mecanismo que conforman el sistema en funcion de una unica variable, para este fin y por medio de un analisis geometrico es posible establecer la siguiente relacion fundamental entre los ángulos por medio del triángulo formado por las longitudes $r$, $d$ y $L$. De esta manera obtenemos:

(ACA VA EL DIAGRAMA!!!!!)

\begin{equation}
L^2 = r^2 + d^2 - 2rd \cos(180^\circ - \phi)
\end{equation}

Por medio de la propiedad trigonometrica  $\cos(180^\circ - \Phi) = -\cos(\phi)$, reducimos la expresion a:

\begin{equation}
L = \sqrt{r^2 + d^2 + 2rd \cos(\phi)}
\end{equation}

Donde L representara la distancia desde el punto O hasta el punto A. Sabiendo esto y usando la ley de senos es posible obtener la siguiente expresion:

\begin{equation}
\frac{\sin(180^\circ - \Phi)}{L} = \frac{\sin(\Theta)}{r}
\end{equation}

Usando la propiedad trigonometrica $\sin(180-\phi) = sin(\phi) $ y despejando r del lado derecho de la ecuacion obtenemos:

\begin{equation}
\sin(\theta) = \frac{\sin(\phi) r}{L}
\end{equation}


Sustituyendo $L$ en la expresion obtenemos:

\begin{equation}
\boxed{
\sin(\Theta) =
\frac{r \sin(\Phi)}
{\sqrt{r^2 + d^2 + 2rd \cos(\Phi)}}
}
\end{equation}

De esta forma se establece una Relacion directa entre el angulo $\theta$ y $\phi$.

\subsubsection{Análisis de velocidades}

Con la geometria del sistema definimos la velocidad en el punto $a$ por medio de las restricciones cinematicas de cada una de las partes a las que pertenece.
En primera instancia sabemos que el punto $a$ respecto la barra $O_2A$ tiene velocidad y aceleración angulares, mas no presenta traslacion. Por tanto se puede plantear la siguiente ecuacion de rotacion respecto a un eje fijo:
\[
  \vec V_a = \boldsymbol{\omega}_2 \times \vec r,\; ⦭\, \Phi^\circ
\]
De igual manera planteamos al punto $a$ respecto a la barra $O_1B$, en la cual al generar un movimiento relativo a un sistema en rotacion es posible obtener la siguiente ecuacion vectorial para $ \vec V_a $:
\[
  \vec V_a = \vec V'_a + \vec V_{a/f}
\]

% Imagen comentada porque el archivo no existe
% \begin{figure}[htbp]
% \centering
% \includegraphics[width=0.27\textwidth]{imagenes/poligono_velocidades.png}
% \caption{Polígono vectorial de velocidades.}
% \label{fig:poligono_velocidades}
% \end{figure}

donde $\vec V'_a$ representa la velocidad producto de la rotacion del sistema mientras que $\vec V_{a/f}$ representa la velocidad relativa de $a$ en el sistema.  (SIGUE EL DIAGRAMA GRANDE CON EL TRIANGULO DE VELOCIDADES) 

Analizando el diagrama y por medio del teorema de [INSERTAR TEOREMA] obtenemos:
\begin{equation}
    V_{a/f} = ( \omega_2\cdot r \cdot \sin(\phi - \theta))
\end{equation}

Usando [TEOREMA 2] tambien obtenemos la siguiente expresion para la velocidad $V'_a$: 
\begin{equation}
    V_a' = \cos(\Phi -\Theta) \, V_a
\end{equation}

Finalmente a partir de esta ultima relacion y remplazando con sus valores producto de su rotacion respecto a un eje fijo obtenemos:

\[
    \omega_1 L = [\cos(\Phi -\Theta)]\, \omega_2 r
\]

Despejando L del lado izquierdo de la ecuacion obtenemos la siguiente expresion para la velocidad angular del eslabón ($ \omega_1 $):
\begin{equation}
    \boxed{
    \omega_1 = \frac{\omega_2 r}{L} \, \cos(\Phi -\Theta)
    }
\end{equation}


% ============================================================
% SECCIÓN 2: ANÁLISIS DE ACELERACIONES
% ============================================================
\subsubsection{Análisis de aceleraciones}

De manera similar a en el analisis de velocidades tomamos a $a$ respecto a la barra $O_2A$ tiene velocidad y aceleración angular y no presenta traslación, debido a esto aplicamos nuevamente rotación respecto a eje fijo y obtenemos la siguiente expresion vectorial:
\[
  \vec a_a = (\alpha_2 \times \vec r) ,\; ⦭\, \Phi^\circ  + (\boldsymbol{\omega}_2 \times(\boldsymbol{\omega}_2 \times \vec r)) ,\; ⦫\, \Phi^\circ
\] 
Donde el primer termino representa la aceleracion tangencial de $a$ mientras el segundo representa su aceleracion normal.
Hecho esto ahora consideramos a como parte de la barra $O_1B$, obteniendo la sigueinte relacion:
\[
  \vec a_a = \vec a'_a + \vec a_{a/f} + \vec a_{cor}
\] 
Donde:

\begin{itemize}
    \item \[
  \vec a'_a =  (\alpha_1 \times \vec L) ,\; ⦫\, \theta^\circ  + (\boldsymbol{\omega}_1 \times(\boldsymbol{\omega}_1 \times \vec L)) ,\; ⦭\, \theta^\circ 
\] 
$\vec a'_a$ representa  la aceleracion producto de la rotacion del sistema
    \item \[
  \vec a_{cor} =  (2\boldsymbol{\omega}_1 \times \vec V_{a/f}) ,\; ⦮\, \theta^\circ \] 
$\vec a_{cor}$ representa la aceleracion de coriolis, un termino adicional que surge en sistemas no inerciales de este tipo
    \item \[a_{a/f} =  \; ⦫\,\theta^\circ \]
$a_{a/f}$ representa la aceleracion del punto $a$ relativo al sistema en rotacion
\end{itemize}
Igualando ambas ecuaciones vectoriales para encontrar las incognitas requeridas proyectamos todos los vectores respecto a sus componentes rectangulares, obteniendo las siguientes ecuaciones para X e Y:
\begin{align*}
(a'_{a})_{t} \sin\theta + (a_{a/f}) \cos\theta 
&= \omega_2^2 r \cos(\Phi) + \alpha_2 r \sin(\Phi) 
+ 2\omega_1 V_{a/f} \sin\theta - \omega_1^2 L \cos\theta \\[8pt]
(a'_{a})_{t} \cos\theta - (a_{a/f}) \sin\theta 
&= \alpha_2 r \cos(\Phi) - \omega_2^2 r \sin(\Phi)
+ 2\omega_1 V_{a/f} \cos\theta + \omega_1^2 L \sin\theta
\end{align*}
Solucionando el sistema para $\alpha_1$ y $a_{a/f}$:

\begin{equation}
\alpha_1 = \frac{\omega_2^2 r\sin(\theta-\Phi)+\alpha_2 r\cos(\theta-\Phi)+2\omega_1V_{a/f}}{L}
\end{equation}

\begin{equation}
a_{a/f} = \omega_2^2 r\cos(\Phi-\theta) + {\alpha}_2 r \sin(\Phi-\theta) - \omega_1^2 L
\end{equation}

% ============================================================
% SECCIÓN 3: LAZO VECTORIAL PARA OBTENER VEL Y ACEL DEL MARTILLO
% ============================================================
\section{Lazo vectorial para obtener velocidad y aceleración del martillo C}

Planteando el lazo vectorial para el mecanismo, se tiene:

Al proyectar en los ejes $x$ y $y$:

\begin{align*}
    X: D - R\cos\theta + K\sin\beta &= 0 \\
    Y: y_c + K\cos\beta - R\sin\theta &= 0
\end{align*}

Elevando ambas ecuaciones al cuadrado y sumando:

\begin{equation*}
    K^2 = {(R\cos\theta - D)}^{2} + {(R\sin\theta - y_c)}^{2}
\end{equation*}

\subsection{Derivación de la velocidad}

Derivando ambos lados respecto al tiempo. Donde:
\begin{itemize}
    \item $K$ es constante
    \item $\frac{d\theta}{dt} = \omega_1$
    \item $y_c$ es variable
    \item $R$ es constante
    \item $D$ es constante
\end{itemize}

\begin{align}
\frac{d(K^2)}{dt} &= \frac{d}{dt}\left[(R\cos(\theta) - D)^2 + (R\sin(\theta) - y_c)^2\right]
\end{align}

Como $K$ es constante:
\begin{align}
0 &= \frac{d}{dt}\left[(R\cos(\theta) - D)^2 + (R\sin(\theta) - y_c)^2\right]
\end{align}

Aplicando la regla de la cadena:
\begin{align}
0 &= 2(R\cos(\theta) - D)\frac{d}{dt}(R\cos(\theta) - D) + 2(R\sin(\theta) - y_c)\frac{d}{dt}(R\sin(\theta) - y_c)
\end{align}

Calculando las derivadas internas:
\begin{align}
\frac{d}{dt}(R\cos(\theta) - D) &= -R\sin(\theta)\frac{d\theta}{dt} = -R\sin(\theta)\omega_1 \\
\frac{d}{dt}(R\sin(\theta) - y_c) &= R\cos(\theta)\frac{d\theta}{dt} - \dot{y}_c = R\cos(\theta)\omega_1 - \dot{y}_c
\end{align}

Sustituyendo:
\begin{align}
0 &= 2(R\cos(\theta) - D)(-R\sin(\theta)\omega_1) + 2(R\sin(\theta) - y_c)(R\cos(\theta)\omega_1 - \dot{y}_c)
\end{align}

Dividiendo entre 2:
\begin{align}
0 &= -(R\cos(\theta) - D)R\sin(\theta)\omega_1 + (R\sin(\theta) - y_c)(R\cos(\theta)\omega_1 - \dot{y}_c)
\end{align}

Expandiendo:
\begin{align}
0 &= -R^2\cos(\theta)\sin(\theta)\omega_1 + DR\sin(\theta)\omega_1 \nonumber \\
  &\quad + R^2\sin(\theta)\cos(\theta)\omega_1 - R\sin(\theta)\dot{y}_c \nonumber \\
  &\quad - y_cR\cos(\theta)\omega_1 + y_c\dot{y}_c
\end{align}

Los términos $R^2\cos(\theta)\sin(\theta)\omega_1$ se cancelan, quedando:
\begin{align}
0 &= DR\sin(\theta)\omega_1 - R\sin(\theta)\dot{y}_c - y_cR\cos(\theta)\omega_1 + y_c\dot{y}_c
\end{align}

Reorganizando:
\begin{align}
\dot{y}_c(R\sin(\theta) - y_c) &= R\omega_1(D\sin(\theta) - y_c\cos(\theta))
\end{align}

\subsection{Resultado para la velocidad}

Dividiendo ambos lados por $(R\sin(\theta) - y_c)$:
\begin{align}
\boxed{\dot{y}_c = \frac{R\omega_1(D\sin(\theta) - y_c\cos(\theta))}{R\sin(\theta) - y_c}}
\end{align}

Esta expresión es válida siempre que $R\sin(\theta) \neq y_c$ (es decir, que el denominador no sea cero).

\subsection{Aceleración mediante lazo vectorial}

Derivando nuevamente la ecuación de velocidad para obtener la aceleración:

\begin{equation}
\ddot{y}_c = 
R \; 
\frac{
\big[ \dot{\omega}_1 A - \omega_1^2 B - \omega_1 \dot{y}_c \cos\theta \big] D_{en}
- \omega_1 A (\dot{y}_c + R \omega_1 \cos\theta)
}{
D_{en}^2
}
\end{equation}

\noindent donde:
\begin{align*}
A &= D\sin\theta - y_c\cos\theta,\\
B &= D\cos\theta + y_c\sin\theta,\\
D_{en} &= R\sin\theta - y_c.
\end{align*}

Nota: $\dot{\omega}_1 = \ddot{\theta} = \alpha_1$ es la aceleración angular.

\subsection{Forma expandida de la aceleración}

Expandiendo la expresión anterior:

\begin{equation}
\begin{aligned}
\ddot{y}_c = &\; \frac{R\alpha_1(D\sin\theta - y_c\cos\theta)(R\sin\theta - y_c)}{(R\sin\theta - y_c)^2} \\
&\; - \frac{R\omega_1^2(D\cos\theta + y_c\sin\theta)(R\sin\theta - y_c)}{(R\sin\theta - y_c)^2} \\
&\; + \frac{R\omega_1\dot{y}_c[R\sin\theta\cos\theta - y_c\cos\theta - D\sin\theta + y_c\cos\theta]}{(R\sin\theta - y_c)^2}
\end{aligned}
\end{equation}

Simplificando:
\begin{equation}
\begin{split}
\ddot{y}_c = &\; \frac{R\alpha_1(D\sin\theta - y_c\cos\theta)(R\sin\theta - y_c)}{(R\sin\theta - y_c)^2} \\
&\; - \frac{R\omega_1^2(D\cos\theta + y_c\sin\theta)(R\sin\theta - y_c)}{(R\sin\theta - y_c)^2} \\
&\; + \frac{R\omega_1\dot{y}_c\big(R\sin\theta\cos\theta - D\sin\theta\big)}{(R\sin\theta - y_c)^2}
\end{split}
\end{equation}

% ============================================================
% SECCIÓN 4: CÁLCULO DE ω₃ Y α₃
% ============================================================
\section{Cálculo de $\omega_3$ y $\alpha_3$}

Este apartado resume cómo calcular primero la velocidad angular $\omega_3$ y luego la aceleración angular $\alpha_3$ del eslabón $K$ (ángulo $\beta$), a partir del giro de la manivela $R$ (ángulo $\theta$) con $\omega_1$ y $\alpha_1$.

\subsection{Geometría}

De la geometría del mecanismo:
\begin{equation}
	\sin\beta = \frac{R\cos\theta - D}{K}, \qquad
	\beta = \arcsin\left(\frac{R\cos\theta - D}{K}\right)
\end{equation}

\subsection{Velocidades}

\subsubsection{Descomposición vectorial}

La velocidad del punto $C$ se puede descomponer como:
\begin{equation}
	\vec v_C = \vec v_B + \vec v_{C/B}
\end{equation}
donde:
\begin{itemize}
	\item $\vec v_B = \omega_1\,R$ ⦭ $\theta$
	\item $\vec v_{C/B} = \omega_3\,K$ ⦪ $\beta$
	\item $\vec v_C = \dot{y}_c$ (dirección vertical ↓)
\end{itemize}

\subsubsection{Proyección en eje horizontal}

Proyectando en el eje horizontal:
\begin{equation}
	0 = -\omega_1\,R\,\sin\theta - \omega_3\,K\,\cos\beta
\end{equation}

Despejando $\omega_3$:
\begin{equation}
	\boxed{
		\omega_3 = -\,\frac{\omega_1\,R\,\sin\theta}{K\,\cos\beta}
	}
\end{equation}

\subsection{Aceleraciones}

\subsubsection{Descomposición vectorial}

La aceleración del punto $C$ se puede descomponer como:
\begin{equation}
	\vec a_C = \vec a_B + \vec a_{C/B}
\end{equation}
donde:
\begin{itemize}
	\item $\vec a_B = \vec a_B^{\,t} + \vec a_B^{\,n}$ con:
	\begin{itemize}
		\item $\vec a_B^{\,t} = \alpha_1\,R$ ⦭ $\theta$ (tangencial)
		\item $\vec a_B^{\,n} = \omega_1^2\,R$ ⦫ $\theta$ (normal, hacia dentro)
	\end{itemize}
	\item $\vec a_{C/B} = \vec a_{C/B}^{\,t} + \vec a_{C/B}^{\,n}$ con:
	\begin{itemize}
		\item $\vec a_{C/B}^{\,t} = \alpha_3\,K$ ⦪ $\beta$ (tangencial)
		\item $\vec a_{C/B}^{\,n} = \omega_3^2\,K$ ⦯ $\beta$ (normal, hacia dentro)
	\end{itemize}
	\item $\vec a_C = \ddot{y}_c$ (dirección vertical ↓)
\end{itemize}

\subsubsection{Proyección en eje horizontal}

Proyectando en el eje horizontal:
\begin{equation}
	0 = -\alpha_1 R\sin\theta + \omega_1^2 R\cos\theta
	    + \alpha_3 K\cos\beta - \omega_3^2 K\sin\beta
\end{equation}

Despejando $\alpha_3$:
\begin{equation}
	\boxed{
		\alpha_3 = \frac{\omega_1^2 R\cos\theta + \alpha_1 R\sin\theta - \omega_3^2 K\sin\beta}{K\cos\beta}
	}
\end{equation}

\subsubsection{Proyección en eje vertical}

Proyectando en el eje vertical:
\begin{equation}
	-\ddot{y}_c = -\omega_1^2 R\sin\theta + \alpha_1 R\cos\theta
	              + \omega_3^2 K\cos\beta - \alpha_3 K\sin\beta
\end{equation}

Por lo tanto:
\begin{equation}
	\boxed{
		a_C = -\omega_1^2 R\sin\theta + \alpha_1 R\cos\theta
		      + \omega_3^2 K\cos\beta - \alpha_3 K\sin\beta
	}
\end{equation}

% ============================================================
% SECCIÓN 5: ANÁLISIS CINÉTICO
% ============================================================
\section{Análisis Cinético}

\subsection{Ecuaciones de movimiento}

\begin{enumerate}
    \item Y - C:
    \begin{equation}
        W_c - C = m_c \bar{a}_c \quad \Rightarrow \quad C = m_c (g - \bar{a_c})
    \end{equation}

    \item X - BC:
    \begin{equation}
        B_x = m_{BC} \cdot (\bar{a}_{BC})_x
    \end{equation}

    \item Y - BC:
    \begin{equation}
        B_y - W_R - C = m_{BC} \cdot (\bar{a}_{BC})_y \quad \Rightarrow \quad B_y = m_{BC}(g + (\bar{a}_{BC})_y) + C
    \end{equation}

    \item Z - BC:
    \begin{equation}
        \frac{K}{2}(B_y \sin\beta - B_x \cos\beta + C\sin(\beta)) = \bar{I_{BC}} \cdot \alpha_3
    \end{equation}

    \item X - $O_1$:
    \begin{equation}
        O_{1x} + A_x - B_x = m_{o_1}(\bar{a}_{o_1})_x \quad \Rightarrow \quad O_{1x} + A_x = m_{o_1}(\bar{a}_{o_1})_x + B_x
    \end{equation}

    \item Y - $O_1$:
    \begin{equation}
        O_{1y} + A_y - B_y = m_{o_1}(\bar{a}_{o_1})_y \quad \Rightarrow \quad (O_1)_y + A_y = m_{o_1}(\bar{a}_{o_1})_y + B_y
    \end{equation}

    \item Z - $O_1$:
    \begin{equation}
        \left(\frac{R}{2} - L\right)(A_x \sin\theta - A_y \cos\theta) - \frac{R}{2}(B_y \cos\theta + A\cos\theta - B_x \sin\theta - A_x \sin\theta) = \bar{I_{o_1}} \cdot \alpha_1
    \end{equation}

    \item X - $O_2$:
    \begin{equation}
        (O_2)_x - A_x = m_r(\bar{a}_{o_2})_x
    \end{equation}

    \item Y - $O_2$:
    \begin{equation}
        (O_2)_y - A_y - W_r= m_r(\bar{a}_{o_2})_y
    \end{equation}

    \item Z - $O_2$:
        \begin{equation}
            \frac{r}{2}\cdot{(A_x\sin\phi + (o_2)_x\sin\phi - A_y \cos\phi - (o_2)_y \cos\phi)} =  \bar{I_{o_2}} \cdot \alpha_2
        \end{equation}

\end{enumerate}

\subsection{Aceleraciones Centroidales}

\subsubsection{Eslabón $O_1-B$}

\begin{align}
\bar{a}_{O_1} &= \alpha_1 \frac{R}{2} ,\;⦭ \, \theta^\circ \quad + \omega_1^2 \frac{R}{2} ,\; ⦫\, \theta^\circ \\
\bar{a}_{O_{1x}} &= -\left(\alpha_1 \frac{R}{2} \sin\theta + \omega_1^2 \frac{R}{2} \cos\theta\right) \\
\bar{a}_{O_{1y}} &= \alpha_1 \frac{R}{2} \cos\theta - \omega_1^2 \frac{R}{2} \sin\theta
\end{align}

\subsubsection{Eslabón $O_2$}

\begin{align}
\bar{a}_{O_2} &= \alpha_1 \frac{r}{2} ,\; ⦭\, \theta^\circ \quad + \omega_1^2 \frac{r}{2} ,\; ⦫\, \theta^\circ \\
\bar{a}_{O_{2x}} &= -\left(\alpha_2 \frac{r}{2} \sin\theta + \omega_2^2 \frac{r}{2} \cos\theta\right) \\
\bar{a}_{O_{2y}} &= \alpha_2 \frac{r}{2} \cos\theta - \omega_2^2 \frac{r}{2} \sin\theta
\end{align}

\subsubsection{Eslabón $B-C$}

\begin{align}
\bar{a}_{BC} &= a_c + \alpha_3 \frac{K}{2} ,\; ⦩\, \beta^\circ \quad + \omega_3^2 \frac{K}{2} ,\; ⦯\, \beta^\circ \\
\bar{a}_{BC,x} &= -\frac{K}{2}(\alpha_3 \cos\beta + \omega_3^2 \sin\beta) \\
\bar{a}_{BC,y} &= -a_c + \frac{K}{2}(\alpha_3 \sin\beta - \omega_3^2 \cos\beta)
\end{align}

donde $\bar{a}_c = \bar{a}_c$

\subsection{Notas adicionales}

Las ecuaciones anteriores describen el sistema completo de fuerzas y momentos actuando sobre el mecanismo. Para resolver el sistema, se necesita:
\begin{itemize}
    \item Conocer las aceleraciones angulares $\alpha_1$, $\alpha_2$, $\alpha_3$
    \item Determinar las fuerzas de reacción $A_x$, $A_y$, $B_x$, $B_y$, $C$
    \item Calcular las reacciones en el punto de apoyo $O_1$
    \item Usar las aceleraciones centroidales para evaluar los términos inerciales
\end{itemize}

\end{document}
